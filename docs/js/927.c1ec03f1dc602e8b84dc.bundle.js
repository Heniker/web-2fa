"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[927],{5927:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var l=a(6252),n=a(3577),o=a(8669),s=a(5830),i=a(1669),r=a(9003),d=a(3379),u=a(2262),c=(a(421),a(9963)),p=a(6922),m=a(5934),v=a(7695),f=a(7563),k=a(5911),w=a(7517);const _={class:"pa-2 d-flex justify-space-between h-100"},b={class:"flex-grow-1 mr-5"},y={class:"text-h5"},g={class:"text-h4 text-black"};var h=a(6309),x=a(6759),C=a(7895),W=a(9057);const V=l.aZ({components:{ProvideValue:C.Kx},props:{token:{required:!0,type:Object}},setup(e,{expose:t}){const a=l.f3(W.Otp.token);assert(a);const n=e.token,o=u.Vh((()=>a.reactive.codes[n.id])),s=function(e){const t=u.iH(!1);let a;return l.YP(t,(()=>{!0===t.value?a=(0,h.i9H)(e,(()=>{t.value=!1})):a?.()})),t}(u.iH((0,h.KQJ)())),i=function(e){const t=[].map.call(e,((e,t)=>e.charCodeAt(0)*(t+1))).reduce(((e,t)=>e+t),0);return["#FFFFFF","#ECECEC","#C4E3F3","#B5E6B5","#D8B4E2","#FFFACD","#FFC0CB","#FFDAB9","#B2DFDB","#FFC1C1"][~~(10*(0,C.F9)(t))]}(e.token.label),r=u.iH(),{transitionDuration:d,transitionState:c,transitionDirection:p}=function(e){const t=l.f3(W.Otp.token);assert(t);const a=u.iH(0),n=u.iH(0),o=u.iH(0),s=(0,h.xKQ)();return(0,x.$M)((()=>"visible"===s.value),(()=>{const l=t.getRemainingTime(e);a.value=0,o.value=n.value?(e.period-l/1e3)/e.period:l/1e3/e.period,requestAnimationFrame((()=>{a.value=l,o.value=n.value?1:0}))}),{immediate:!0}),l.YP(u.Vh((()=>t.reactive.codes[e.id])),((l,s)=>{s&&(a.value=0,o.value=n.value?1:0,n.value=Number(!n.value),requestAnimationFrame((()=>{const l=t.getRemainingTime(e);a.value=l,o.value=n.value?1:0})))})),{transitionState:o,transitionDuration:a,transitionDirection:n}}(n);return{transitionDirection:p,transitionDuration:d,transitionState:c,progressBar:r,isEdit:s,color:i,displayCode:o}}});var F=a(3744);const D=(0,F.Z)(V,[["render",function(e,t,a,o,s,i){return(0,l.wg)(),(0,l.j4)(m._,{class:(0,n.C_)(e.$style["cool-background"]),height:"170",color:"#DCEFEF",variant:"outlined",onContextmenu:t[2]||(t[2]=(0,c.iM)((t=>e.isEdit||(e.isEdit=!0,t.preventDefault())),["right"]))},{default:(0,l.w5)((()=>[(0,l._)("div",_,[(0,l._)("div",b,[e.isEdit?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l.Wm)(v.E,{class:"mt-2 text-h1"},{default:(0,l.w5)((()=>[(0,l.Wm)(w.h,{modelValue:e.token.label,"onUpdate:modelValue":t[0]||(t[0]=t=>e.token.label=t),label:"Name",variant:"filled",density:"default","hide-details":""},null,8,["modelValue"])])),_:1}),(0,l.Wm)(f.Q,{class:"mt-auto mb-3"},{default:(0,l.w5)((()=>[(0,l.Wm)(w.h,{modelValue:e.token.description,"onUpdate:modelValue":t[1]||(t[1]=t=>e.token.description=t),label:"Description",variant:"solo",density:"comfortable","hide-details":""},null,8,["modelValue"])])),_:1})],64)):((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[(0,l.Wm)(v.E,null,{default:(0,l.w5)((()=>[(0,l._)("span",y,(0,n.zw)(e.token.label||"­"),1)])),_:1}),(0,l.Wm)(f.Q,null,{default:(0,l.w5)((()=>[(0,l._)("span",null,(0,n.zw)(e.token.description||"­"),1)])),_:1}),(0,l.Wm)(k.Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c.uT,{name:"fade"},{default:(0,l.w5)((()=>[(0,l._)("span",{class:(0,n.C_)([e.$style.code,"text-h2 my-auto text-h3"])},(0,n.zw)(e.displayCode||"­"),3)])),_:1})])),_:1})],64))]),(0,l.kq)(' <v-avatar color="#89CFF0" size="90" class="ma-auto mr-3 flex-shrink-0"> '),(0,l.Wm)(p.V,{color:e.color,size:"90",class:"my-auto mr-3 flex-shrink-0"},{default:(0,l.w5)((()=>[(0,l._)("span",g,(0,n.zw)(e.token.label.charAt(0).toUpperCase()),1),(0,l.kq)(' <v-icon large color="blue darken-2">\r\n            S\r\n          </v-icon> ')])),_:1},8,["color"])]),(0,l._)("div",{ref:"progressBar",style:(0,n.j5)({transform:`scaleX(${e.transitionState})`,transitionDuration:`${e.transitionDuration}ms`,transformOrigin:e.transitionDirection?"left":"right"}),class:(0,n.C_)(["bg-deep-purple-darken-3",e.$style.progressbar])},null,6),(0,l.kq)(' <v-progress-linear\r\n      :class="$style.progressbar"\r\n      :style="{ \'transition-duration\': `${transitionSpeed}s` }"\r\n      :max="token.period"\r\n      :reverse="!!transitionDirection"\r\n      :active="true"\r\n      :model-value="transitionState"\r\n      color="deep-purple"\r\n      height="3"\r\n    ></v-progress-linear> ')])),_:1},8,["class"])}],["__cssModules",{$style:{progressbar:"K9wiOc3J8u_GjOhjzR3g","cool-background":"jYwiYTumXIYLO7Tmp77g",code:"hiu06IZilDqlwmAzGJ2F",progress:"tXTvV5iXgFNtELzZGfj5"}}],["__scopeId","data-v-4fb0b8db"]]);var S=a(2201);l.h(s.T,{});const E=l.aZ({components:{TwoFaCard:D},setup(){const e=l.f3(W.Otp.token);assert(e);const t=l.f3(W.Security.token);assert(t);const a=(0,S.tv)();e.fetchStoredTokens(),l.wF((async()=>{t.reactive.isContextSetUp||a.push({name:"9062"})}));const n=u.iH(!0);return{tokens:l.Fl((()=>e.reactive.tokens)),isContextSetUp:l.Fl((()=>t.reactive.isContextSetUp)),testt:"Hello world",isAdding:n,addToken:()=>{t.reactive.isContextSetUp&&a.push({name:"9127"})}}}}),A=(0,F.Z)(E,[["render",function(e,t,a,u,c,p){const m=(0,l.up)("TwoFaCard"),v=(0,l.up)("router-view");return(0,l.wg)(),(0,l.iD)(l.HY,null,[((0,l.wg)(),(0,l.j4)(l.lR,{to:"#app-bar-portal"},[(0,l.Wm)(o.L,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i.K,{fluid:"",class:"d-flex"},{default:(0,l.w5)((()=>[((0,l.wg)(),(0,l.j4)(l.lR,{to:"#app-overlay-portal",disabled:!e.display.smAndDown},[e.isContextSetUp?((0,l.wg)(),(0,l.j4)(s.T,{key:0,class:(0,n.C_)([[e.display.smAndDown?e.$style["add-new-mobile"]:""],"ml-auto"]),size:e.display.smAndDown?"x-large":void 0,onClick:e.addToken,"aria-label":"Create new token",color:"deep-purple-darken-1",variant:"elevated",elevation:"4",icon:"mdi-plus"},null,8,["class","size","onClick"])):(0,l.kq)("v-if",!0)],8,["disabled"]))])),_:1})])),_:1})])),(0,l.Wm)(i.K,{fluid:""},{default:(0,l.w5)((()=>[(0,l.Wm)(r.o,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.tokens,(e=>((0,l.wg)(),(0,l.j4)(d.D,{cols:"12",md:"6",lg:"4",xl:"3"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{token:e},null,8,["token"])])),_:2},1024)))),256))])),_:1})])),_:1}),(0,l.Wm)(v)],64)}],["__cssModules",{$style:{"add-new-mobile":"iFkBKAraq6Qpm5UGGCKq"}}],["__scopeId","data-v-5a0963d6"]])},9127:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var l=a(6252),n=a(3577),o=a(9963),s=a(5830),i=a(5934),r=a(7695),d=a(5911),u=a(6334),c=a(9357),p=a(9003),m=a(3379),v=a(6494),f=a(5951),k=a(7517),w=a(5913),_=a(2262),b=a(5455),y=a(9057),g=a(3416);const h=l.aZ({components:{},setup(e,t){const a=l.f3(y.Otp.token);assert(a);const n=_.iH({id:(0,g.x0)(),label:"",description:"",period:30,algorithm:"SHA1",codeLen:6,code:""}),o=_.iH("");return{display:(0,b.AW)(),token:n,tokenSecret:o,saveToken:()=>{a.addToken(n.value,o.value)},otpService:a,isSettingsExpanded:_.iH(!1)}}}),x=(0,a(3744).Z)(h,[["render",function(e,t,a,_,b,y){return(0,l.wg)(),(0,l.j4)(l.lR,{to:"#app-overlay-portal"},[(0,l._)("div",{class:(0,n.C_)(e.$style.scrim)},null,2),(0,l._)("section",{class:(0,n.C_)(e.$style.overlay)},[(0,l.Wm)(i._,{width:e.display.smAndDown.value?"90vw":400},{default:(0,l.w5)((()=>[(0,l.Wm)(r.E,{class:"d-flex justify-center mt-3 mb-1 text-h4"},{default:(0,l.w5)((()=>[(0,l.Uk)("Add 2FA")])),_:1}),(0,l.Wm)(d.Z,{class:"pb-2"},{default:(0,l.w5)((()=>[(0,l.Wm)(c.O,null,{default:(0,l.w5)((()=>[(0,l.Wm)(k.h,{modelValue:e.token.label,"onUpdate:modelValue":t[0]||(t[0]=t=>e.token.label=t),"aria-autocomplete":"none",class:"mt-3",label:"Name","hide-details":""},null,8,["modelValue"]),(0,l.Wm)(k.h,{modelValue:e.token.description,"onUpdate:modelValue":t[1]||(t[1]=t=>e.token.description=t),"aria-autocomplete":"none",class:"mt-3",label:"Description","hide-details":""},null,8,["modelValue"]),(0,l.Wm)(k.h,{modelValue:e.tokenSecret,"onUpdate:modelValue":t[2]||(t[2]=t=>e.tokenSecret=t),"aria-autocomplete":"none",label:"Token","hide-details":"",class:"mt-3",rules:[e=>!!e||"Token is required"]},null,8,["modelValue","rules"])])),_:1})])),_:1}),(0,l.Wm)(u.h,{class:"mx-2 mb-2 d-flex justify-space-between"},{default:(0,l.w5)((()=>[(0,l.Wm)(s.T,{class:"px-4",tag:"a",color:"red",variant:"tonal",to:{name:"5927"}},{default:(0,l.w5)((()=>[(0,l.Uk)(" Cancel ")])),_:1},8,["to"]),(0,l.kq)(' <v-btn\r\n            @click="isSettingsExpanded = !isSettingsExpanded"\r\n            :class="[$style[\'expand-btn\'], isSettingsExpanded && $style[\'expand-btn--active\']]"\r\n            class="mb-n2"\r\n            color="grey-darken-1"\r\n            variant="outlined"\r\n            icon="mdi-chevron-double-down"\r\n          ></v-btn> '),(0,l.Wm)(s.T,{onClick:t[3]||(t[3]=t=>e.isSettingsExpanded=!e.isSettingsExpanded),class:(0,n.C_)([[e.$style["expand-btn"]],"mb-n4"]),size:"small",color:"grey-darken-1",variant:e.isSettingsExpanded?"outlined":"text"},{default:(0,l.w5)((()=>[(0,l.Uk)(" advanced ")])),_:1},8,["class","variant"]),(0,l.Wm)(s.T,{class:"px-4",tag:"a",color:"green",variant:"tonal",onClick:e.saveToken,to:{name:"5927"}},{default:(0,l.w5)((()=>[(0,l.Uk)(" Create ")])),_:1},8,["onClick","to"])])),_:1}),(0,l.Wm)(w.Fx,null,{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(f.C,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p.o,{"no-gutters":"",class:"pb-4 pt-2 px-4"},{default:(0,l.w5)((()=>[(0,l.Wm)(m.D,{class:"mr-4"},{default:(0,l.w5)((()=>[(0,l.Wm)(v.rL,{modelValue:e.token.algorithm,"onUpdate:modelValue":t[4]||(t[4]=t=>e.token.algorithm=t),items:e.otpService.supportedAlgorithms,label:"Algorithm",variant:"solo-filled","hide-details":""},null,8,["modelValue","items"])])),_:1}),(0,l.Wm)(m.D,{class:"mr-4"},{default:(0,l.w5)((()=>[(0,l.Wm)(k.h,{label:"Time step",modelValue:e.token.period,"onUpdate:modelValue":t[5]||(t[5]=t=>e.token.period=t),modelModifiers:{number:!0},"hide-details":"",type:"number"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(m.D,null,{default:(0,l.w5)((()=>[(0,l.Wm)(k.h,{label:"Code size",modelValue:e.token.codeLen,"onUpdate:modelValue":t[6]||(t[6]=t=>e.token.codeLen=t),modelModifiers:{number:!0},"hide-details":"",type:"number"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},512),[[o.F8,e.isSettingsExpanded]])])),_:1})])),_:1},8,["width"])],2)])}],["__cssModules",{$style:{overlay:"crRcBNcfLxn2ChZ213nr",scrim:"q7F2w4tK9vH6WRZ1PICP","expand-btn":"oqpbs1sjUuyLvWW4Cren"}}],["__scopeId","data-v-2f235df2"]])},9062:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});var l=a(6252),n=a(3577),o=a(9963),s=a(5830),i=a(5934),r=a(7695),d=a(5911),u=a(6334),c=a(7517),p=a(2262),m=a(5455),v=a(9057),f=a(7895),k=a(2201);const w=l.aZ({components:{ProvideValue:f.Kx},setup(e,t){const a=l.f3(v.Otp.token);assert(a);const n=l.f3(v.Security.token);assert(n);const o=(0,k.tv)(),s=p.iH("");return{display:(0,m.AW)(),password:s,onPasswordAccept:()=>{n.setupSecureContext(s.value),o.push({name:"5927"})}}}}),_=(0,a(3744).Z)(w,[["render",function(e,t,a,p,m,v){const f=(0,l.up)("ProvideValue");return(0,l.wg)(),(0,l.j4)(l.lR,{to:"#app-overlay-portal"},[(0,l._)("section",{class:(0,n.C_)(["d-flex justify-center align-center",e.$style.overlay])},[(0,l.Wm)(i._,{width:e.display.smAndDown.value?"90%":400},{default:(0,l.w5)((()=>[(0,l.Wm)(r.E,{class:"d-flex justify-center mt-3 mb-1 text-h4"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Provide password ")])),_:1}),(0,l.Wm)(d.Z,null,{default:(0,l.w5)((()=>[(0,l.kq)(" <v-form> "),(0,l.Wm)(f,{isPassVisible:!1},{default:(0,l.w5)((a=>[(0,l.Wm)(c.h,{modelValue:e.password,"onUpdate:modelValue":t[0]||(t[0]=t=>e.password=t),class:"mt-3",autofocus:"",density:"default","append-inner-icon":a.isPassVisible?"mdi-eye":"mdi-eye-off",rules:[e=>!!e||"Password is required"],type:a.isPassVisible?"text":"password",label:"Decryption password","onClick:appendInner":e=>a.isPassVisible=!a.isPassVisible,onKeyup:(0,o.D2)(e.onPasswordAccept,["enter"])},null,8,["modelValue","append-inner-icon","rules","type","onClick:appendInner","onKeyup"])])),_:1}),(0,l.kq)(" </v-form> ")])),_:1}),(0,l.Wm)(u.h,{class:"mb-4 mt-n3 d-flex justify-space-around"},{default:(0,l.w5)((()=>[(0,l.Wm)(s.T,{class:"px-10",color:"deep-purple-accent-1",variant:"tonal",onClick:e.onPasswordAccept},{default:(0,l.w5)((()=>[(0,l.Uk)(" Confirm ")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["width"])],2)])}],["__cssModules",{$style:{overlay:"bUPI1ORL7H4Pd9IBmTpl"}}],["__scopeId","data-v-21885678"]])}}]);
//# sourceMappingURL=927.c1ec03f1dc602e8b84dc.bundle.js.map